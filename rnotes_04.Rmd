---
title: "R Workbook 4"
output: html_notebook
---
Author: Avik Deb (avikdeb@gmail.com)

10 November, 2018

<br>

### Day 4

<br>

#### Working with Data - Missing Values, Data Frames

<b>Factors</b>

Factors are used to represent categorical data - can be ordered or unordered. Factor => Integer vector where each has a label. Use factor() fuction to create factors. Factors are automatically created when we read a dataset using fuction like read.table() 

<b>Ex.1</b> Create a factor with some categorical data (say, yes/no or male/female). Show them in a table.

```{r}

response.fact <- factor(c("yes", "yes", "no", "yes", "no"))
response.fact

# Get it in a table - number of yes and no is displayed
table(response.fact)

```
<br>

<b>Missing Values - </b> Missing values are denoted by NA or NaN for undefined mathematical operations. Below functions are used to test such scenarios:

*is.na()* - Used to test objects if they are NA
*is.nan()* - Used to test for NaN
*NA values have a class also - integer NA, character NA etc*
*NaN is NA but reverse is not true*

```{r}

# Test the missing value

test.v <- c(1, 2, NA, 4, NaN, 6, 7)

# T for both NA and NaN
is.na(test.v)

# T for only NaN
is.nan(test.v)


```


<b>Data Frames - </b>Used to store tabular data in R. Package dplyr is very useful while working with data frames. Data frames are special types of list where every element of the list has to have the same length. Each element of the list => column and the length of each element of the list is the number of rows. Unlike matrices, data frames can store different classes of objects in each column. Data frames are usually created by reading in a dataset using the read.table() or read.csv() or they can be created explicitly with the data.frame() function. Data frames can be converted to a matrix by data.matrix(). 

```{r}

frame.1 <- data.frame(serial = 1:5, occupancy = c(T, T, F, F, T), gender = c("M", "F", "F", "F", "M"), city = c("Kolkata", "Mumbai", "Delhi", "Chennai", "Bengaluru" ), connectivity = c("air", "air", "air", "road", "rail"))

frame.1


```

<b>Exercise 1 - </b> Read data from a CSV file - student.csv. Print the highest score and show the full record for the student who got the highest score. Show the students of class 5 with best attendance ( meaning no. of days has to be minimum in collection)
```{r}

student.data <- read.csv("student.csv")

print(student.data)

# Getting the highest score i.e. a specific data
highest.score <- max(student.data$total_score)
print(highest.score)

# Getting the full record of highest score
ret.val <- subset(student.data, total_score == max(total_score))
print(ret.val)

# Getting the best attendance in class 5
best.attend.5 <- subset(student.data, days_absent == min(days_absent) & class == 5)
best.attend.5

```

<br>
<b>Bar Plot 2 - </b>Print a barplot taking inputs from the student.csv file - student roll number vs. absent of class 6


```{r}

absent.data <- student.data$days_absent
#barplot(absent.data.6)

absent.dataf.6 <- subset(student.data, days_absent & class == 6)
absent.dataf.6
barplot(absent.dataf.6$days_absent, main = "Absent Data for Class 6", xlab = "Roll Number", ylab = "Number of days absent", names.arg = c(absent.dataf.6$roll_number))


```

<br>
<b>Bar Plot 3 - </b>Print the above plot horizontally. Hint: use horiz = TRUE in parameter
```{r}

barplot(absent.dataf.6$days_absent, main = "Absent Data for Class 6", xlab = "Number of days absent", ylab = "Roll Number", names.arg = c(absent.dataf.6$roll_number), horiz = TRUE)

```

<br>
<b>Histogram Plot 4 - </b>Plot a histogram of wages of labourers - 400, 700, 200, 700, 400, 600, 500, 400, 500, 600, 700, 300, 600, 700, 400, 300). This will plot the wages of the workers and their frequency.

```{r}

wages = c(400, 700, 200, 700, 400, 600, 500, 400, 500, 600, 700, 300, 600, 700, 400, 300)

hist(wages, main = "Daily Wages", xlab = "Wages in INR", ylab = "Frequency", col = "pink", freq = TRUE)

```

<br>
<b>Histogram Plot 5 - </b>Plot the above histogram of wages of labourers but now with density and density line.

```{r}

wages = c(400, 700, 200, 700, 400, 600, 500, 400, 500, 600, 700, 300, 600, 700, 400, 300)

# Drawing the histogram
hist.d = hist(wages, main = "Daily Wages", xlab = "Wages in INR", ylab = "Density", xlim = c(200, 700), col = "yellow", freq = FALSE)

# Deawing the density line
lines(density(wages), col = "red")

```

<br>
<b>Line Plot 6 - </b>Plot a simple line graph with given x and y values.

```{r}

y = c(14, 12, 18, 10, 15)
x = c(1, 2, 3, 4, 5)

# Plot the Line chart
plot(x, y, type = "o", col = "red", xlab = "Month", ylab = "Rainfall in mm.", main = "Monthly Rainfall Chart")

```

<br>
<b>Line Plot 7 - </b>Plot the above rainfall chart, now for 3 different cities

```{r}

delhi = c(14, 12, 13, 10, 15)
kolkata = c(15, 10, 11, 15, 12)
mumbai = c(10, 13, 11, 12, 14)
data.month = c(1, 2, 3, 4, 5)

# Plot the line chart
plot(data.month, delhi, type = "o", col = "red", xlab = "Month", ylab = "Rainfall in mm.", main = "Monthly Rainfall Chart")
lines(data.month, kolkata, type = "o", col = "blue")
lines(data.month, mumbai, type = "o", col = "green")

legend("top", legend = c("Rainfall in Delhi", "Rainfall in Kolkata", "Rainfall in Mumbai"), col = 1:3, pch = 1)



```

<br>
<b>Pie Plot 8 - </b>Plot a pie chart showing monthly expenditure breakdown of a person e.g. housing 400, food 300, clothing 150, entertainment 100, others 200

```{r}

expenditure = c(400, 300, 150, 100, 200)

# Calculating the percentage - note how round() and sum() functions are used
pie.percent <- round(100*expenditure/sum(expenditure), 1)

# Adding % symbol to each p.c. value
pie.percent <- paste(pie.percent, "%", sep = "")

# Plotting the pie
pie(expenditure, labels = pie.percent, main = "Monthly Expenditure Breakdown", col = c("red", "orange", "yellow", "blue", "green"), border = "brown", clockwise = TRUE)

# Legend for the pie chart
legend("topright", c("Housing", "Food", "Clothing", "Entertainment", "Others"), cex = 0.8, fill = c("red", "orange", "yellow", "blue", "green"))




```

<br>
<b>Scatter Plot 9 - </b>Scatter plots are useful to find correlations among the data points. A best fit line, known as <b>trendline</b>, can be drawn in order to study the relationships.
<br>
<b>Problem:</b> use the dataset __mtcars__ available within R environment to create a basic scatterplot. we will use the columns __wt__ and __mpg__ for weight of the car and the miles per gallon (or milage).

```{r}

# Get the input values from the data set
input <- mtcars[,c('wt', 'mpg')]

plot(x = input$wt, y = input$mpg, xlab = "weight", ylab = "Milage", xlim = c(2.5, 5), ylim = c(15, 20), main = "Weight vs. Milage")

# Drawing the trendline - Note the use of Linear Model Function or lm()
abline(lm(input$mpg~ input$wt), col = "blue")

```

